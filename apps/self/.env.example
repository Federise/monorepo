# Server Configuration
# PORT defaults based on TLS_MODE:
#   - acme/custom → 443 (standard HTTPS)
#   - off/auto → 3000 (development)
# PORT=3000
CORS_ORIGIN=*
DATA_DIR=./data

# ============================================================================
# TLS Configuration (HTTPS)
# ============================================================================
# TLS_MODE controls how TLS certificates are handled:
#   - "off"    : No TLS (HTTP only) - for development or behind a reverse proxy
#   - "auto"   : Auto-generate self-signed certificate (for local development)
#   - "acme"   : Use Let's Encrypt for trusted certificates (recommended for production)
#   - "custom" : Use your own certificate files
#
# If TLS_MODE is not set, it will be auto-detected:
#   - If DOMAIN is set → "acme"
#   - If TLS_CERT and TLS_KEY are set → "custom"
#   - If TLS_AUTO=true → "auto" (legacy support)
#   - Otherwise → "off"

# Option 1: No TLS (for local development - avoids cert issues)
TLS_MODE=off

# Option 2: Let's Encrypt (recommended for production)
# Automatically obtains and renews trusted TLS certificates
# Requires: Domain pointing to this server, ports 80 and 443 accessible
# TLS_MODE=acme
# DOMAIN=gateway.example.com
# ACME_EMAIL=admin@example.com
# ACME_STAGING=true  # Set to false for production certificates

# Option 3: Self-signed certificate (browsers will show warnings)
# TLS_MODE=auto

# Option 4: Custom certificates
# TLS_MODE=custom
# TLS_CERT=/path/to/cert.pem
# TLS_KEY=/path/to/key.pem

# ============================================================================
# Authentication (optional)
# ============================================================================
# If set, this key can be used for admin operations (create principals, etc.)
# If not set, the gateway runs in open mode (useful for single-user setups)
# BOOTSTRAP_API_KEY=your-bootstrap-key-here

# ============================================================================
# Deno KV
# ============================================================================
# Explicit path for KV database - required for compiled binary to persist data
KV_PATH=./data/kv.db

# ============================================================================
# Blob Storage Configuration
# ============================================================================
# Two modes available: "filesystem" (default) or "s3"
#
# Filesystem mode (standalone - no external dependencies):
#   BLOB_STORAGE=filesystem
#   BLOB_PATH=./data/blobs
#
# S3 mode (requires S3-compatible storage like MinIO, AWS S3, etc.):
#   BLOB_STORAGE=s3
#   S3_ENDPOINT=http://localhost:9000
#   S3_ACCESS_KEY_ID=minioadmin
#   S3_SECRET_ACCESS_KEY=minioadmin
#
# If BLOB_STORAGE is not set, it defaults to:
#   - "filesystem" if no S3 config is present
#   - "s3" if S3_ENDPOINT and S3_ACCESS_KEY_ID are set

# Filesystem blob storage (standalone mode)
BLOB_STORAGE=filesystem
BLOB_PATH=./data/blobs

# S3-Compatible Storage (uncomment to use S3 instead of filesystem)
# BLOB_STORAGE=s3
# S3_ENDPOINT=http://localhost:9000
# S3_ACCESS_KEY_ID=minioadmin
# S3_SECRET_ACCESS_KEY=minioadmin
# S3_REGION=us-east-1
# S3_PRIVATE_BUCKET=federise-private
# S3_PUBLIC_BUCKET=federise-public

# Optional: Public URL for blob downloads (if using CDN or different domain)
# PUBLIC_DOMAIN=https://cdn.example.com
